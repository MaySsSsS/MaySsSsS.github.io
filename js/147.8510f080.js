"use strict";(self["webpackChunkbase_admin_vue2"]=self["webpackChunkbase_admin_vue2"]||[]).push([[147],{4147:function(t,e,i){i.r(e),i.d(e,{default:function(){return n}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"MyStructure"},[e("div",{staticClass:"btn"},[e("el-button",{attrs:{disabled:!t.buttonAuth,type:"primary"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("添加")])],1),e("div",{staticClass:"table"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.structuredData}},[e("el-table-column",{attrs:{label:"创建时间",width:"auto"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("i",{staticClass:"el-icon-time"}),e("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(i.row.date))])]}}])}),e("el-table-column",{attrs:{label:"编号",width:"auto"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(i.row.id))])]}}])}),e("el-table-column",{attrs:{label:"名称",width:"auto"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(i.row.name))])]}}])}),e("el-table-column",{attrs:{label:"所属",width:"auto"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(i.row.location))])]}}])}),e("el-table-column",{attrs:{label:"经度",width:"auto"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(i.row.jingdu))])]}}])}),e("el-table-column",{attrs:{label:"纬度",width:"auto"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"margin-left":"5px"}},[t._v(t._s(i.row.weidu))])]}}])}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{disabled:!t.buttonAuth,size:"mini"},on:{click:function(e){return t.openEditForm(i.$index,i.row)}}},[t._v("编辑")]),e("el-button",{attrs:{disabled:!t.buttonAuth,size:"mini",type:"danger"},on:{click:function(e){return t.deleteStructure(i.$index,i.row)}}},[t._v("删除")])]}}])})],1)],1),e("el-dialog",{attrs:{title:"结构物添加",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.rules}},[e("el-form-item",{attrs:{label:"编号",prop:"id","label-width":"80px",required:""}},[e("el-input",{model:{value:t.addForm.id,callback:function(e){t.$set(t.addForm,"id",e)},expression:"addForm.id"}})],1),e("el-form-item",{attrs:{label:"名称",prop:"name","label-width":"80px",required:""}},[e("el-input",{model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1),e("el-form-item",{attrs:{label:"所属桥梁",prop:"location","label-width":"80px"}},[e("el-input",{model:{value:t.addForm.location,callback:function(e){t.$set(t.addForm,"location",e)},expression:"addForm.location"}})],1),e("el-form-item",{attrs:{label:"经度",prop:"jingdu","label-width":"80px"}},[e("el-input",{model:{value:t.addForm.jingdu,callback:function(e){t.$set(t.addForm,"jingdu",e)},expression:"addForm.jingdu"}})],1),e("el-form-item",{attrs:{label:"纬度",prop:"weidu","label-width":"80px"}},[e("el-input",{model:{value:t.addForm.weidu,callback:function(e){t.$set(t.addForm,"weidu",e)},expression:"addForm.weidu"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addStructure("addForm")}}},[t._v("确 定")])],1)],1),e("el-dialog",{attrs:{title:"结构物编辑",visible:t.editDialogFormVisible},on:{"update:visible":function(e){t.editDialogFormVisible=e}}},[e("el-form",{ref:"editForm",attrs:{model:t.editForm,rules:t.rules}},[e("el-form-item",{attrs:{label:"编号",prop:"id","label-width":"80px",required:""}},[e("el-input",{attrs:{readonly:""},model:{value:t.editForm.id,callback:function(e){t.$set(t.editForm,"id",e)},expression:"editForm.id"}})],1),e("el-form-item",{attrs:{label:"名称",prop:"name","label-width":"80px",required:""}},[e("el-input",{model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),e("el-form-item",{attrs:{label:"所属桥梁",prop:"location","label-width":"80px"}},[e("el-input",{model:{value:t.editForm.location,callback:function(e){t.$set(t.editForm,"location",e)},expression:"editForm.location"}})],1),e("el-form-item",{attrs:{label:"经度",prop:"jingdu","label-width":"80px"}},[e("el-input",{model:{value:t.editForm.jingdu,callback:function(e){t.$set(t.editForm,"jingdu",e)},expression:"editForm.jingdu"}})],1),e("el-form-item",{attrs:{label:"纬度",prop:"weidu","label-width":"80px"}},[e("el-input",{model:{value:t.editForm.weidu,callback:function(e){t.$set(t.editForm,"weidu",e)},expression:"editForm.weidu"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.editStructure("editForm")}}},[t._v("确 定")])],1)],1)],1)},r=[],l={name:"MyStructure",data(){return{structuredData:[],dialogFormVisible:!1,editDialogFormVisible:!1,buttonAuth:!1,addForm:{date:"",id:"",name:"",location:"",jingdu:"",weidu:""},editForm:{date:"",id:"",name:"",location:"",jingdu:"",weidu:""},rules:{id:[{require:!0,message:"请输入编号",trigger:"blur"},{min:3,max:10,message:"长度在3到10个字符",trigger:"blur"}],name:[{require:!0,message:"请输入名称",trigger:"blur"},{min:3,max:10,message:"长度在3到10个字符",trigger:"blur"}]}}},methods:{async updateData(){await this.$store.dispatch("initStructure"),this.structuredData=this.$store.state.StructureStore.StructureList},addStructure(t){this.$refs[t].validate((e=>{e?(this.addForm.date=(new Date).toLocaleString(),this.$store.dispatch("addStructure",this.addForm),this.updateData(),this.dialogFormVisible=!1,this.$refs[t].resetFields(),this.$message({type:"success",message:"添加成功!"})):this.$message.error("请提交符合规范的信息!")}))},openEditForm(t,e){this.editDialogFormVisible=!0,this.editForm=JSON.parse(JSON.stringify(e))},editStructure(t){this.$refs[t].validate((e=>{e?(this.$store.commit("editStructure",this.editForm),this.updateData(),this.editDialogFormVisible=!1,this.$refs[t].resetFields(),this.$message({type:"success",message:"编辑成功!"})):this.$message.error("请提交符合规范的信息!")}))},deleteStructure(t,e){this.$confirm("是否永久删除该数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.$message({type:"success",message:"删除成功!"}),this.$store.dispatch("deleteStructure",e),this.updateData()})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))}},created(){this.updateData(),this.buttonAuth="admin"===this.$store.state.UserStore.token||"user"===this.$store.state.UserStore.token}},o=l,s=i(1656),d=(0,s.A)(o,a,r,!1,null,"002944c9",null),n=d.exports}}]);
//# sourceMappingURL=147.8510f080.js.map