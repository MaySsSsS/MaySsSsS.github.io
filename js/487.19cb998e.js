"use strict";(self["webpackChunkbase_admin_vue2"]=self["webpackChunkbase_admin_vue2"]||[]).push([[487],{4487:function(s,t,e){e.r(t),e.d(t,{default:function(){return u}});var o=function(){var s=this,t=s._self._c;return t("div",{staticClass:"websocket"},[t("h2",[s._v("回显")]),t("el-button",{attrs:{type:"primary"},on:{click:s.openSocket}},[s._v("打开websocket连接")]),t("el-button",{attrs:{type:"danger"},on:{click:s.close}},[s._v("关闭websocket连接")]),t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入发送的消息"},model:{value:s.msgEcho,callback:function(t){s.msgEcho=t},expression:"msgEcho"}}),t("el-button",{attrs:{type:"success"},on:{click:s.sendMsg}},[s._v("发送消息")]),t("hr"),t("h2",[s._v("本地")]),t("el-button",{attrs:{type:"primary"},on:{click:s.openLocal}},[s._v("打开websocket连接")]),t("el-button",{attrs:{type:"danger"},on:{click:s.closeLocal}},[s._v("关闭websocket连接")]),t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入发送的消息"},model:{value:s.msgLocalhost,callback:function(t){s.msgLocalhost=t},expression:"msgLocalhost"}}),t("el-button",{attrs:{type:"success"},on:{click:s.sendLocal}},[s._v("发送消息")]),t("hr")],1)},c=[];class n{constructor(s,t=""){this.url=s,this.userId=t,this.status=null,this.ws=null}connect(s){this.ws=new WebSocket(this.url+"/"+this.userId),this.ws.onopen=t=>{if(this.status="open",console.log(`userId:${this.userId} 连接成功!`,t.target.url),void 0!==s)return this.ws.send(s)},this.ws.onmessage=s=>(console.log(`userId:${this.userId} 收到数据!`,s.data),s.data),this.ws.onclose=s=>(console.log(`userId:${this.userId} 连接关闭!`,s),s),this.ws.onerror=s=>(console.log(`userId:${this.userId} 连接错误!`,s),s)}send(s){return this.ws.send(s)}closeConnection(){return this.status="close",console.log(`userId:${this.userId} 主动关闭连接!`),this.ws.close()}}var l=n,h={name:"MyWebSockte",data(){return{msgEcho:"",wsEcho:"",msgBitCoin:"",wsBitCoin:"",msgLocalhost:"",wsLocalhost:""}},methods:{openSocket(){this.wsEcho=new l("wss://echo.websocket.events","mays"),this.wsEcho.connect()},sendMsg(){this.wsEcho?this.wsEcho.send(this.msgEcho):this.$message.error("请先打开回显websocket连接")},close(){this.wsEcho?this.wsEcho.closeConnection():this.$message.error("请先打开回显websocket连接")},openLocal(){this.wsLocalhost=new l("ws://localhost:8080/ws","mays"),this.wsLocalhost.connect()},sendLocal(){this.wsLocalhost?this.wsLocalhost.send(this.msgLocalhost):this.$message.error("请先打开本地websocket连接")},closeLocal(){this.wsLocalhost?this.wsLocalhost.closeConnection():this.$message.error("请先打开本地websocket连接")}}},i=h,a=e(1656),r=(0,a.A)(i,o,c,!1,null,"06cbe152",null),u=r.exports}}]);
//# sourceMappingURL=487.19cb998e.js.map