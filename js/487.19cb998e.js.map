{"version":3,"file":"js/487.19cb998e.js","mappings":"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","sources":["webpack://base-admin-vue2/./src/components/mainPage/MyWebSocket.vue","webpack://base-admin-vue2/./src/utils/websocket.js","webpack://base-admin-vue2/src/components/mainPage/MyWebSocket.vue","webpack://base-admin-vue2/./src/components/mainPage/MyWebSocket.vue?e5cd","webpack://base-admin-vue2/./src/components/mainPage/MyWebSocket.vue?389c"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"websocket\"},[_c('h2',[_vm._v(\"回显\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.openSocket}},[_vm._v(\"打开websocket连接\")]),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.close}},[_vm._v(\"关闭websocket连接\")]),_c('el-input',{staticStyle:{\"width\":\"300px\"},attrs:{\"placeholder\":\"请输入发送的消息\"},model:{value:(_vm.msgEcho),callback:function ($$v) {_vm.msgEcho=$$v},expression:\"msgEcho\"}}),_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.sendMsg}},[_vm._v(\"发送消息\")]),_c('hr'),_c('h2',[_vm._v(\"本地\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.openLocal}},[_vm._v(\"打开websocket连接\")]),_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.closeLocal}},[_vm._v(\"关闭websocket连接\")]),_c('el-input',{staticStyle:{\"width\":\"300px\"},attrs:{\"placeholder\":\"请输入发送的消息\"},model:{value:(_vm.msgLocalhost),callback:function ($$v) {_vm.msgLocalhost=$$v},expression:\"msgLocalhost\"}}),_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.sendLocal}},[_vm._v(\"发送消息\")]),_c('hr')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","class MyWebSocket {\r\n    constructor(url, userId='') {\r\n        this.url = url\r\n        this.userId = userId\r\n        this.status = null\r\n        this.ws = null // websocket对象\r\n    }\r\n\r\n    // 创建\r\n    connect(data) {\r\n        this.ws = new WebSocket(this.url + '/' + this.userId)\r\n\r\n        // 连接\r\n        this.ws.onopen = (e) => {\r\n            // 连接成功的回调函数\r\n            this.status = 'open'\r\n            console.log(`userId:${this.userId} 连接成功!`, e.target.url)\r\n            //如果有数据需要发送：\r\n            if (data !== undefined) return this.ws.send(data)\r\n        }\r\n\r\n        this.ws.onmessage = (e) => {\r\n            console.log(`userId:${this.userId} 收到数据!`, e.data)\r\n            return e.data\r\n        }\r\n\r\n        this.ws.onclose = (e) => {\r\n            console.log(`userId:${this.userId} 连接关闭!`, e)\r\n            return e\r\n        }\r\n\r\n        this.ws.onerror = (e) => {\r\n            console.log(`userId:${this.userId} 连接错误!`, e)\r\n            return e\r\n        }\r\n    }\r\n\r\n    send(data) {\r\n        return this.ws.send(data)\r\n    }\r\n\r\n    closeConnection() {\r\n        this.status = 'close';\r\n        console.log(`userId:${this.userId} 主动关闭连接!`)\r\n        return this.ws.close()\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default MyWebSocket;","<!--  -->\r\n<template>\r\n    <div class=\"websocket\">\r\n        <h2>回显</h2>\r\n            <el-button type=\"primary\" @click=\"openSocket\">打开websocket连接</el-button>\r\n            <el-button type=\"danger\" @click=\"close\">关闭websocket连接</el-button>\r\n            <el-input style=\"width: 300px\" v-model=\"msgEcho\" placeholder=\"请输入发送的消息\"/>\r\n            <el-button type=\"success\" @click=\"sendMsg\">发送消息</el-button>\r\n        <hr>\r\n\r\n        <h2>本地</h2>\r\n            <el-button type=\"primary\" @click=\"openLocal\">打开websocket连接</el-button>\r\n            <el-button type=\"danger\" @click=\"closeLocal\">关闭websocket连接</el-button>\r\n            <el-input style=\"width: 300px\" v-model=\"msgLocalhost\" placeholder=\"请输入发送的消息\"/>\r\n            <el-button type=\"success\" @click=\"sendLocal\">发送消息</el-button>\r\n        <hr>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport MyWebSockte from '@/utils/websocket';\r\nexport default {\r\n    name: 'MyWebSockte',\r\n    data () {\r\n        return {\r\n            msgEcho:'',\r\n            wsEcho:'',\r\n            msgBitCoin:'',\r\n            wsBitCoin:'',\r\n            msgLocalhost:'',\r\n            wsLocalhost:'',\r\n\r\n        }\r\n    },\r\n\r\n    methods: {\r\n\r\n        // 回显\r\n        openSocket() {\r\n            this.wsEcho = new MyWebSockte('wss://echo.websocket.events', 'mays')\r\n            this.wsEcho.connect()\r\n        },\r\n        sendMsg() {\r\n            if (!this.wsEcho) {\r\n                this.$message.error('请先打开回显websocket连接')\r\n                return\r\n            }\r\n            this.wsEcho.send(this.msgEcho)\r\n        },\r\n        close() {\r\n            if (!this.wsEcho) {\r\n                this.$message.error('请先打开回显websocket连接')\r\n                return\r\n            }\r\n            this.wsEcho.closeConnection()\r\n        },\r\n\r\n\r\n        // localhost\r\n        openLocal() {\r\n            this.wsLocalhost = new MyWebSockte('ws://localhost:8080/ws', 'mays')\r\n            this.wsLocalhost.connect()\r\n        },\r\n        sendLocal() {\r\n            if (!this.wsLocalhost) {\r\n                this.$message.error('请先打开本地websocket连接')\r\n                return\r\n            }\r\n            this.wsLocalhost.send(this.msgLocalhost)\r\n        },\r\n        closeLocal() {\r\n            if (!this.wsLocalhost) {\r\n                this.$message.error('请先打开本地websocket连接')\r\n                return\r\n            }\r\n            this.wsLocalhost.closeConnection()\r\n        }\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n\r\n<style scoped lang=\"less\">\r\n    .websocket {\r\n        > * {\r\n            margin-right: 10px;\r\n        }\r\n    }\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MyWebSocket.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MyWebSocket.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./MyWebSocket.vue?vue&type=template&id=06cbe152&scoped=true\"\nimport script from \"./MyWebSocket.vue?vue&type=script&lang=js\"\nexport * from \"./MyWebSocket.vue?vue&type=script&lang=js\"\nimport style0 from \"./MyWebSocket.vue?vue&type=style&index=0&id=06cbe152&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06cbe152\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","attrs","on","openSocket","close","staticStyle","model","value","msgEcho","callback","$$v","expression","sendMsg","openLocal","closeLocal","msgLocalhost","sendLocal","staticRenderFns","MyWebSocket","constructor","url","userId","status","ws","connect","data","WebSocket","onopen","e","console","log","target","undefined","send","onmessage","onclose","onerror","closeConnection","name","wsEcho","msgBitCoin","wsBitCoin","wsLocalhost","methods","MyWebSockte","$message","error","component"],"sourceRoot":""}