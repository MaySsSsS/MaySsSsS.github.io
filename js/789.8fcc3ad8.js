"use strict";(self["webpackChunkbase_admin_vue2"]=self["webpackChunkbase_admin_vue2"]||[]).push([[789],{7789:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"AuthorityManagement"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.userList}},[e("el-table-column",{attrs:{label:"角色",width:"auto"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("span",[t._v(t._s(s.row.roles))])]}}])}),e("el-table-column",{attrs:{label:"账号",width:"auto"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("span",[t._v(t._s(s.row.id))])]}}])}),e("el-table-column",{attrs:{label:"密码",width:"auto"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("span",[t._v(t._s(s.row.pwd))])]}}])}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.initDrawer(s.row)}}},[t._v("管理权限")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteStructure(s.$index,s.row)}}},[t._v("删除")])]}}])})],1),e("el-drawer",{attrs:{title:"管理权限",visible:t.drawer,"before-close":t.handleClose,size:"20%"},on:{"update:visible":function(e){t.drawer=e}}},[e("el-form",{attrs:{model:t.form,"label-position":"right","label-width":"80px"}},[e("el-form-item",{attrs:{label:"websocket"}},[e("el-switch",{model:{value:t.form.websocket,callback:function(e){t.$set(t.form,"websocket",e)},expression:"form.websocket"}})],1),e("el-form-item",{attrs:{label:"dashboard"}},[e("el-switch",{model:{value:t.form.Dashboard,callback:function(e){t.$set(t.form,"Dashboard",e)},expression:"form.Dashboard"}})],1),e("el-form-item",{attrs:{label:"promise"}},[e("el-switch",{model:{value:t.form.MyPromise,callback:function(e){t.$set(t.form,"MyPromise",e)},expression:"form.MyPromise"}})],1),e("el-form-item",{attrs:{label:"css"}},[e("el-switch",{model:{value:t.form.MyCss,callback:function(e){t.$set(t.form,"MyCss",e)},expression:"form.MyCss"}})],1),e("el-form-item",{attrs:{label:"structure"}},[e("el-switch",{model:{value:t.form.MyStructure,callback:function(e){t.$set(t.form,"MyStructure",e)},expression:"form.MyStructure"}})],1),e("el-form-item",{attrs:{label:"authority"}},[e("el-switch",{model:{value:t.form.AuthorityManagement,callback:function(e){t.$set(t.form,"AuthorityManagement",e)},expression:"form.AuthorityManagement"}})],1)],1)],1)],1)},o=[],a={name:"AuthorityManagement",data(){return{userList:[],drawer:!1,editUser:"",form:""}},methods:{async updateData(){this.$store.commit("GETUSER"),"admin"===this.$store.state.UserStore.user.roles&&(await this.$store.dispatch("getAllUsers"),this.userList=this.$store.state.UserStore.allUsers,console.log("权限管理输出:",this.userList))},initDrawer(t){console.log(t),this.drawer=!0,this.form=t.form,this.editUser=t},handleClose(t){this.$confirm("所做的修改将会保存，确认关闭？").then((()=>{this.$store.commit("editAuthority",this.editUser),this.updateData(),console.log(this.$store.state.UserStore.curUser,"12312312"),t()})).catch((()=>{}))},editAuthority(){console.log(this.form),this.$store.commit("editAuthority",this.form,this.editUser),this.updateData(),this.form="",this.editUser=""}},created(){this.updateData()}},i=a,l=s(1656),n=(0,l.A)(i,r,o,!1,null,"5ba9ed5e",null),u=n.exports}}]);
//# sourceMappingURL=789.8fcc3ad8.js.map